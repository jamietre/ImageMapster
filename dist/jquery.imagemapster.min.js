/* ImageMapster
   Version: 1.2.14-beta2 (2021.01.04)

Copyright 2011-2012 James Treworgy

http://www.outsharked.com/imagemapster
https://github.com/jamietre/ImageMapster

A jQuery plugin to enhance image maps.

*/
("function"==typeof define?define:function(e){"undefined"!=typeof module?module.exports=e():jQuery.mapster_when=e()})(function(){function p(){}function f(n){var e=new p;return e.then=function(e){var t;try{return e&&(t=e(n)),o(t===_?n:t)}catch(a){return d(a)}},m(e)}function d(i){var e=new p;return e.then=function(e,t){var a;try{return t?o((a=t(i))===_?i:a):d(i)}catch(n){return d(n)}},m(e)}function e(e){return w(e,function(e){return d(e)})}function y(){function e(e,t,a){return c(e,t,a)}function t(e){u(f(e))}function a(e){u(d(e))}function n(e){l(e)}var i,o,r,s,c,l,u;return r=[],s=[],c=function h(t,a,e){var n=y();return r.push(function(e){e.then(t,a).then(n.resolve,n.reject,n.progress)}),e&&s.push(e),n.promise},l=function(e){for(var t,a=0;t=s[a++];)t(e)},u=function(e){var t,a=0;for(c=e.then,u=l=function n(){throw new Error("already completed")},s=_;t=r[a++];)t(e);r=[]},i={},(o=new p).then=i.then=e,i.promise=m(o),i.resolver=m({resolve:i.resolve=t,reject:i.reject=a,progress:i.progress=n}),i}function n(e){return e&&"function"==typeof e.then}function w(e,t,a,n){return o(e).then(t,a,n)}function o(e){var t,a;return e instanceof p?t=e:(a=y(),n(e)?e.then(a.resolve,a.reject,a.progress):a.resolve(e),t=a.promise),t}function r(e,d,m,g,v){return b(2,arguments),w(e,function(e){function t(e){l(e)}function a(e){u(e)}function n(e){h(e)}function i(){l=u=h=k}var o,r,s,c,l,u,h,p,f;if(p=e.length>>>0,o=Math.max(0,Math.min(d,p)),r=[],s=w(c=y(),m,g,v),o)for(l=function(e){r.push(e),--o||(i(),c.resolve(r))},u=function(e){i(),c.reject(e)},h=c.progress,f=0;f<p;++f)f in e&&w(e[f],t,a,n);else c.resolve(r);return s})}function t(e,t,a,n){return b(1,arguments),w(e,function(e){return u(e,s,[])}).then(t,a,n)}function s(e,t,a){return e[a]=t,e}function a(e,t,a,n){function i(e){return t?t(e[0]):e[0]}return r(e,1,i,a,n)}function i(e,t){return w(e,function(e){return c(e,t)})}function c(e,t){var a,n,i;for(n=e.length>>>0,a=new Array(n),i=0;i<n;i++)i in e&&(a[i]=w(e[i],t));return u(a,s,a)}function l(e,t,a){var n=v.call(arguments,1);return w(e,function(e){return u.apply(_,[e].concat(n))})}function u(e,i,t){var o,a;return o=e.length,a=[function(e,a,n){return w(e,function(t){return w(a,function(e){return i(t,e,n,o)})})}],2<arguments.length&&a.push(t),g.apply(e,a)}function h(e,t,a){var n=2<arguments.length;return w(e,function(e){return n&&(e=a),t.resolve(e),e},function(e){return t.reject(e),d(e)},t.progress)}function b(e,t){for(var a,n=t.length;e<n;)if(null!=(a=t[--n])&&"function"!=typeof a)throw new Error("callback is not a function")}function k(){}var m,g,v,_;return w.defer=y,w.reject=e,w.isPromise=n,w.all=t,w.some=r,w.any=a,w.map=i,w.reduce=l,w.chain=h,m=Object.freeze||function(e){return e},p.prototype=m({always:function(e,t){return this.then(e,e,t)},otherwise:function(e){return this.then(_,e)}}),v=[].slice,g=[].reduce||function(e){var t,a,n,i,o;if(o=0,i=(t=Object(this)).length>>>0,(a=arguments).length<=1)for(;;){if(o in t){n=t[o++];break}if(++o>=i)throw new TypeError}else n=a[1];for(;o<i;++o)o in t&&(n=e(n,t[o],o,t));return n},w}),function($){var ad,bd,cd;$.fn.mapster=function(e){var t=$.mapster.impl;return $.isFunction(t[e])?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.mapster"):t.bind.apply(this,arguments)},$.mapster={version:"1.2.14-beta2",render_defaults:{isSelectable:!0,isDeselectable:!0,fade:!1,fadeDuration:150,fill:!0,fillColor:"000000",fillColorMask:"FFFFFF",fillOpacity:.7,highlight:!0,stroke:!1,strokeColor:"ff0000",strokeOpacity:1,strokeWidth:1,includeKeys:"",altImage:null,altImageId:null,altImages:{}},defaults:{clickNavigate:!1,wrapClass:null,wrapCss:null,onGetList:null,sortList:!1,listenToList:!1,mapKey:"",mapValue:"",singleSelect:!1,listKey:"value",listSelectedAttribute:"selected",listSelectedClass:null,onClick:null,onMouseover:null,onMouseout:null,mouseoutDelay:0,onStateChange:null,boundList:null,onConfigured:null,configTimeout:3e4,noHrefIsMask:!0,scaleMap:!0,safeLoad:!1,areas:[]},shared_defaults:{render_highlight:{fade:!0},render_select:{fade:!1},staticState:null,selected:null},area_defaults:{includeKeys:"",isMask:!1},canvas_style:{position:"absolute",left:0,top:0,padding:0,border:0},hasCanvas:null,isTouch:null,map_cache:[],hooks:{},addHook:function(e,t){this.hooks[e]=(this.hooks[e]||[]).push(t)},callHooks:function(e,a){$.each(this.hooks[e]||[],function(e,t){t.apply(a)})},utils:{when:$.mapster_when,defer:$.mapster_when.defer,subclass:function(a,n){var e=function(){var e=this,t=Array.prototype.slice.call(arguments,0);e.base=a.prototype,e.base.init=function(){a.prototype.constructor.apply(e,t)},n.apply(e,t)};return e.prototype=new a,e.prototype.constructor=e},asArray:function(e){return e.constructor===Array?e:this.split(e)},split:function(e,t){var a,n,i=e.split(",");for(a=0;a<i.length;a++)""===(n=$.trim(i[a]))?i.splice(a,1):i[a]=t?t(n):n;return i},updateProps:function(e,t){var n,i=e||{},a=$.isEmptyObject(i)?t:e;return n=[],$.each(a,function(e){n.push(e)}),$.each(Array.prototype.slice.call(arguments,1),function(e,a){$.each(a||{},function(e){if(!n||0<=$.inArray(e,n)){var t=a[e];$.isPlainObject(t)?i[e]=$.extend(i[e]||{},t):t&&t.constructor===Array?i[e]=t.slice(0):void 0!==t&&(i[e]=a[e])}})}),i},isElement:function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},indexOf:function(e,t){for(var a=0;a<e.length;a++)if(e[a]===t)return a;return-1},indexOfProp:function(e,a,n){var i=e.constructor===Array?-1:null;return $.each(e,function(e,t){if(t&&(a?t[a]:t)===n)return i=e,!1}),i},boolOrDefault:function(e,t){return this.isBool(e)?e:t||!1},isBool:function(e){return"boolean"==typeof e},isUndef:function(e){return void 0===e},ifFunction:function(e,t,a){$.isFunction(e)&&e.call(t,a)},size:function(e,t){var a=$.mapster.utils;return{width:t?e.width||e.naturalWidth:a.imgWidth(e,!0),height:t?e.height||e.naturalHeight:a.imgHeight(e,!0),complete:function(){return!!this.height&&!!this.width}}},setOpacity:function(e,a){$.mapster.hasCanvas()?e.style.opacity=a:$(e).each(function(e,t){"undefined"!=typeof t.opacity?t.opacity=a:$(t).css("opacity",a)})},fader:(ad={},bd=0,cd=function(e,t,a,n){var i,o,r=n/15,s=$.mapster.utils;if("number"==typeof e){if(!(o=ad[e]))return}else(i=s.indexOfProp(ad,null,e))&&delete ad[i],ad[++bd]=o=e,e=bd;t=(a=a||1)-.01<t+a/r?a:t+a/r,s.setOpacity(o,t),t<a&&setTimeout(function(){cd(e,t,a,n)},15)},cd)},getBoundList:function(a,e){if(!a.boundList)return null;var n,i,o=$(),r=$.mapster.utils.split(e);return a.boundList.each(function(e,t){for(n=0;n<r.length;n++)i=r[n],$(t).is("["+a.listKey+'="'+i+'"]')&&(o=o.add(t))}),o},setBoundListProperties:function(a,e,n){e.each(function(e,t){a.listSelectedClass&&(n?$(t).addClass(a.listSelectedClass):$(t).removeClass(a.listSelectedClass)),a.listSelectedAttribute&&$(t).attr(a.listSelectedAttribute,n)})},getMapDataIndex:function(e){var t,a;switch(e.tagName&&e.tagName.toLowerCase()){case"area":a=$(e).parent().attr("name"),t=$("img[usemap='#"+a+"']")[0];break;case"img":t=e}return t?this.utils.indexOfProp(this.map_cache,"image",t):-1},getMapData:function(e){var t=this.getMapDataIndex(e.length?e[0]:e);if(0<=t)return 0<=t?this.map_cache[t]:null},queueCommand:function(e,t,a,n){return!!e&&(!(e.complete&&!e.currentAction)&&(e.commands.push({that:t,command:a,args:n}),!0))},unload:function(){this.impl.unload(),this.utils=null,this.impl=null,$.fn.mapster=null,$.mapster=null,$("*").unbind()}};var m=$.mapster,u=m.utils,ap=Array.prototype;$.each(["width","height"],function(e,a){var n=a.substr(0,1).toUpperCase()+a.substr(1);u["img"+n]=function(e,t){return(t?$(e)[a]():0)||e[a]||e["natural"+n]||e["client"+n]||e["offset"+n]}}),m.Method=function(e,t,a,n){var i=this;i.name=n.name,i.output=e,i.input=e,i.first=n.first||!1,i.args=n.args?ap.slice.call(n.args,0):[],i.key=n.key,i.func_map=t,i.func_area=a,i.name=n.name,i.allowAsync=n.allowAsync||!1},m.Method.prototype={constructor:m.Method,go:function(){var e,t,a,n,i,o=this.input,r=[],s=this;for(n=o.length,e=0;e<n;e++)if(t=$.mapster.getMapData(o[e])){if(!s.allowAsync&&m.queueCommand(t,s.input,s.name,s.args)){this.first&&(i="");continue}if((a=t.getData("AREA"===o[e].nodeName?o[e]:this.key))?$.inArray(a,r)<0&&r.push(a):i=this.func_map.apply(t,s.args),this.first||void 0!==i)break}return $(r).each(function(e,t){i=s.func_area.apply(t,s.args)}),void 0!==i?i:this.output}},$.mapster.impl=function(){function hasVml(){var e=$("<div />").appendTo("body");e.html('<v:shape id="vml_flag1" adj="1" />');var t=e[0].firstChild;t.style.behavior="url(#default#VML)";var a=!t||"object"==typeof t.adj;return e.remove(),a}function namespaces(){return"object"==typeof document.namespaces?document.namespaces:null}function hasCanvas(){var e=namespaces();return(!e||!e.g_vml_)&&!!$("<canvas />")[0].getContext}function merge_areas(a,e){var n,i,o=a.options.areas;e&&$.each(e,function(e,t){t&&t.key&&(0<=(i=u.indexOfProp(o,"key",t.key))?$.extend(o[i],t):o.push(t),(n=a.getDataForKey(t.key))&&$.extend(n.options,t))})}function merge_options(e,t){var a=u.updateProps({},t);delete a.areas,u.updateProps(e.options,a),merge_areas(e,t.areas),u.updateProps(e.area_options,e.options)}var me={},addMap=function(e){return m.map_cache.push(e)-1},removeMap=function(e){m.map_cache.splice(e.index,1);for(var t=m.map_cache.length-1;t>=this.index;t--)m.map_cache[t].index--};return me.get=function(e){var t=m.getMapData(this);if(!t||!t.complete)throw"Can't access data until binding complete.";return new m.Method(this,function(){return this.getSelected()},function(){return this.isSelected()},{name:"get",args:arguments,key:e,first:!0,allowAsync:!0,defaultReturn:""}).go()},me.data=function(e){return new m.Method(this,null,function(){return this},{name:"data",args:arguments,key:e}).go()},me.highlight=function(t){return new m.Method(this,function(){if(!1!==t){var e=this.highlightId;return 0<=e?this.data[e].key:null}this.ensureNoHighlight()},function(){this.highlight()},{name:"highlight",args:arguments,key:t,first:!0}).go()},me.keys=function(e,n){function a(e){var t,a=[];n?(t=e.areas(),$.each(t,function(e,t){a=a.concat(t.keys)})):a.push(e.key),$.each(a,function(e,t){$.inArray(t,i)<0&&i.push(t)})}var i=[],o=m.getMapData(this);if(!o||!o.complete)throw"Can't access data until binding complete.";return o&&o.complete?("string"==typeof e?n?a(o.getDataForKey(e)):i=[o.getKeysForGroup(e)]:(n=e,this.each(function(e,t){"AREA"===t.nodeName&&a(o.getDataForArea(t))})),i.join(",")):""},me.select=function(){me.set.call(this,!0)},me.deselect=function(){me.set.call(this,!1)},me.set=function(i,n,e){function o(e){var t=i;if(e){switch(i){case!0:e.select(f);break;case!1:e.deselect(!0);break;default:t=e.toggle(f)}return t}}function r(e){e&&$.inArray(e,p)<0&&(p.push(e),h+=(""===h?"":",")+e.key)}function s(n){$.each(p,function(e,t){var a=o(t);n.options.boundList&&m.setBoundListProperties(n.options,m.getBoundList(n.options,h),a)}),i||n.removeSelectionFinish()}var c,l,h,p,f=e;return this.filter("img,area").each(function(e,t){var a;(l=m.getMapData(t))!==c&&(c&&s(c),p=[],h=""),l&&(a="","IMG"===t.nodeName.toUpperCase()?m.queueCommand(l,$(t),"set",[i,n,f])||(n instanceof Array?n.length&&(a=n.join(",")):a=n,a&&$.each(u.split(a),function(e,t){r(l.getDataForKey(t.toString())),c=l})):(f=n,m.queueCommand(l,$(t),"set",[i,f])||(r(l.getDataForArea(t)),c=l)))}),l&&s(l),this},me.unbind=function(e){return new m.Method(this,function(){this.clearEvents(),this.clearMapData(e),removeMap(this)},null,{name:"unbind",args:arguments}).go()},me.rebind=function(t){return new m.Method(this,function(){var e=this;e.complete=!1,e.configureOptions(t),e.bindImages().then(function(){e.buildDataset(!0),e.complete=!0})},null,{name:"rebind",args:arguments}).go()},me.get_options=function(e,t){var a=u.isBool(e)?e:t;return new m.Method(this,function(){var e=$.extend({},this.options);return a&&(e.render_select=u.updateProps({},m.render_defaults,e,e.render_select),e.render_highlight=u.updateProps({},m.render_defaults,e,e.render_highlight)),e},function(){return a?this.effectiveOptions():this.options},{name:"get_options",args:arguments,first:!0,allowAsync:!0,key:e}).go()},me.set_options=function(e){return new m.Method(this,function(){merge_options(this,e)},null,{name:"set_options",args:arguments}).go()},me.unload=function(){var e;for(e=m.map_cache.length-1;0<=e;e--)m.map_cache[e]&&me.unbind.call($(m.map_cache[e].image));me.graphics=null},me.snapshot=function(){return new m.Method(this,function(){$.each(this.data,function(e,t){t.selected=!1}),this.base_canvas=this.graphics.createVisibleCanvas(this),$(this.image).before(this.base_canvas)},null,{name:"snapshot"}).go()},me.state=function(){var a,n=null;return $(this).each(function(e,t){if("IMG"===t.nodeName)return(a=m.getMapData(t))&&(n=a.state()),!1}),n},me.bind=function(r){return this.each(function(e,t){var a,n,i,o;if(a=$(t),o=m.getMapData(t)){if(me.unbind.apply(a),!o.complete)return a.bind(),!0;o=null}if(n=(i=this.getAttribute("usemap"))&&$('map[name="'+i.substr(1)+'"]'),!(a.is("img")&&i&&0<n.length))return!0;a.css("border",0),o||((o=new m.MapData(this,r)).index=addMap(o),o.map=n,o.bindImages().then(function(){o.initialize()}))})},me.init=function(e){var a,t;m.hasCanvas=function(){return u.isBool(m.hasCanvas.value)||(m.hasCanvas.value=u.isBool(e)?e:hasCanvas()),m.hasCanvas.value},m.hasVml=function(){if(!u.isBool(m.hasVml.value)){var e=namespaces();e&&!e.v&&(e.add("v","urn:schemas-microsoft-com:vml"),a=document.createStyleSheet(),t=["shape","rect","oval","circ","fill","stroke","imagedata","group","textbox"],$.each(t,function(e,t){a.addRule("v\\:"+t,"behavior: url(#default#VML); antialias:true")})),m.hasVml.value=hasVml()}return m.hasVml.value},m.isTouch=!!document.documentElement.ontouchstart,u.indexOf=Array.prototype.indexOf||u.indexOf,$.extend(m.defaults,m.render_defaults,m.shared_defaults),$.extend(m.area_defaults,m.render_defaults,m.shared_defaults)},me.test=function(obj){return eval(obj)},me}(),$.mapster.impl.init()}(jQuery),function(p){function l(e,t,a){var n=e,i=n.map_data,o=a.isMask;p.each(t.areas(),function(e,t){a.isMask=o||t.nohref&&i.options.noHrefIsMask,n.addShape(t,a)}),a.isMask=o}function a(e){return Math.max(0,Math.min(parseInt(e,16),255))}function c(e,t){return"rgba("+a(e.substr(0,2))+","+a(e.substr(2,2))+","+a(e.substr(4,2))+","+t+")"}function n(){}var i,o,r,u=p.mapster,h=u.utils;u.Graphics=function(e){var t=this;t.active=!1,t.canvas=null,t.width=0,t.height=0,t.shapes=[],t.masks=[],t.map_data=e},i=u.Graphics.prototype={constructor:u.Graphics,begin:function(e,t){var a=p(e);this.elementName=t,this.canvas=e,this.width=a.width(),this.height=a.height(),this.shapes=[],this.masks=[],this.active=!0},addShape:function(e,t){(t.isMask?this.masks:this.shapes).push({mapArea:e,options:t})},createVisibleCanvas:function(e){return p(this.createCanvasFor(e)).addClass("mapster_el").css(u.canvas_style)[0]},addShapeGroup:function(e,n,t){var a,i,o,r=this,s=this.map_data,c=e.effectiveRenderOptions(n);t&&p.extend(c,t),"select"===n?(i="static_"+e.areaId.toString(),o=s.base_canvas):o=s.overlay_canvas,r.begin(o,i),c.includeKeys&&(a=h.split(c.includeKeys),p.each(a,function(e,t){var a=s.getDataForKey(t.toString());l(r,a,a.effectiveRenderOptions(n))})),l(r,e,c),r.render(),c.fade&&h.fader(u.hasCanvas()?o:p(o).find("._fill").not(".mapster_mask"),0,u.hasCanvas()?1:c.fillOpacity,c.fadeDuration)}},o={renderShape:function(e,t,a){var n,i=t.coords(null,a);switch(t.shape){case"rect":e.rect(i[0],i[1],i[2]-i[0],i[3]-i[1]);break;case"poly":for(e.moveTo(i[0],i[1]),n=2;n<t.length;n+=2)e.lineTo(i[n],i[n+1]);e.lineTo(i[0],i[1]);break;case"circ":case"circle":e.arc(i[0],i[1],i[2],0,2*Math.PI,!1)}},addAltImage:function(e,t,a,n){e.beginPath(),this.renderShape(e,a),e.closePath(),e.clip(),e.globalAlpha=n.altImageOpacity||n.fillOpacity,e.drawImage(t,0,0,a.owner.scaleInfo.width,a.owner.scaleInfo.height)},render:function(){var e,a,n=this,i=n.map_data,t=n.masks.length,o=n.createCanvasFor(i),r=o.getContext("2d"),s=n.canvas.getContext("2d");return t&&(e=n.createCanvasFor(i),(a=e.getContext("2d")).clearRect(0,0,e.width,e.height),p.each(n.masks,function(e,t){a.save(),a.beginPath(),n.renderShape(a,t.mapArea),a.closePath(),a.clip(),a.lineWidth=0,a.fillStyle="#000",a.fill(),a.restore()})),p.each(n.shapes,function(e,t){r.save(),t.options.fill&&(t.options.altImageId?n.addAltImage(r,i.images[t.options.altImageId],t.mapArea,t.options):(r.beginPath(),n.renderShape(r,t.mapArea),r.closePath(),r.fillStyle=c(t.options.fillColor,t.options.fillOpacity),r.fill())),r.restore()}),p.each(n.shapes.concat(n.masks),function(e,t){var a=1===t.options.strokeWidth?.5:0;t.options.stroke&&(r.save(),r.strokeStyle=c(t.options.strokeColor,t.options.strokeOpacity),r.lineWidth=t.options.strokeWidth,r.beginPath(),n.renderShape(r,t.mapArea,a),r.closePath(),r.stroke(),r.restore())}),t?(a.globalCompositeOperation="source-out",a.drawImage(o,0,0),s.drawImage(e,0,0)):s.drawImage(o,0,0),n.active=!1,n.canvas},createCanvasFor:function(e){return p('<canvas width="'+e.scaleInfo.width+'" height="'+e.scaleInfo.height+'"></canvas>')[0]},clearHighlight:function(){var e=this.map_data.overlay_canvas;e.getContext("2d").clearRect(0,0,e.width,e.height)},refreshSelections:function(){var e,t=this.map_data;e=t.base_canvas,t.base_canvas=this.createVisibleCanvas(t),p(t.base_canvas).hide(),p(e).before(t.base_canvas),t.redrawSelections(),p(t.base_canvas).show(),p(e).remove()}},r={renderShape:function(e,t,a){var n,i,o,r,s,c,l,u=this,h=e.coords();switch(s=u.elementName?'name="'+u.elementName+'" ':"",c=a?'class="'+a+'" ':"",r='<v:fill color="#'+t.fillColor+'" class="_fill" opacity="'+(t.fill?t.fillOpacity:0)+'" /><v:stroke class="_fill" opacity="'+t.strokeOpacity+'"/>',i=t.stroke?" strokeweight="+t.strokeWidth+' stroked="t" strokecolor="#'+t.strokeColor+'"':' stroked="f"',n=t.fill?' filled="t"':' filled="f"',e.shape){case"rect":l="<v:rect "+c+s+n+i+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+h[0]+"px;top:"+h[1]+"px;width:"+(h[2]-h[0])+"px;height:"+(h[3]-h[1])+'px;">'+r+"</v:rect>";break;case"poly":l="<v:shape "+c+s+n+i+' coordorigin="0,0" coordsize="'+u.width+","+u.height+'" path="m '+h[0]+","+h[1]+" l "+h.slice(2).join(",")+' x e" style="zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:'+u.width+"px;height:"+u.height+'px;">'+r+"</v:shape>";break;case"circ":case"circle":l="<v:oval "+c+s+n+i+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+(h[0]-h[2])+"px;top:"+(h[1]-h[2])+"px;width:"+2*h[2]+"px;height:"+2*h[2]+'px;">'+r+"</v:oval>"}return o=p(l),p(u.canvas).append(o),o},render:function(){var a,n=this;return p.each(this.shapes,function(e,t){n.renderShape(t.mapArea,t.options)}),this.masks.length&&p.each(this.masks,function(e,t){a=h.updateProps({},t.options,{fillOpacity:1,fillColor:t.options.fillColorMask}),n.renderShape(t.mapArea,a,"mapster_mask")}),this.active=!1,this.canvas},createCanvasFor:function(e){var t=e.scaleInfo.width,a=e.scaleInfo.height;return p('<var width="'+t+'" height="'+a+'" style="zoom:1;overflow:hidden;display:block;width:'+t+"px;height:"+a+'px;"></var>')[0]},clearHighlight:function(){p(this.map_data.overlay_canvas).children().remove()},removeSelections:function(e){0<=e?p(this.map_data.base_canvas).find('[name="static_'+e.toString()+'"]').remove():p(this.map_data.base_canvas).children().remove()}},p.each(["renderShape","addAltImage","render","createCanvasFor","clearHighlight","removeSelections","refreshSelections"],function(e,t){var a;i[t]=(a=t,function(){return i[a]=(u.hasCanvas()?o[a]:r[a])||n,i[a].apply(this,arguments)})})}(jQuery),function(o){var e=o.mapster,i=e.utils,a=[];e.MapImages=function(e){this.owner=e,this.clear()},e.MapImages.prototype={constructor:e.MapImages,slice:function(){return a.slice.apply(this,arguments)},splice:function(){return a.slice.apply(this.status,arguments),a.slice.apply(this,arguments)},complete:function(){return o.inArray(!1,this.status)<0},_add:function(e){var t=a.push.call(this,e)-1;return this.status[t]=!1,t},indexOf:function(e){return i.indexOf(this,e)},clear:function(){var a=this;a.ids&&0<a.ids.length&&o.each(a.ids,function(e,t){delete a[t]}),a.ids=[],a.length=0,a.status=[],a.splice(0)},add:function(e,t){var a,n,i=this;if(e){if("string"==typeof e){if("object"==typeof(e=i[n=e]))return i.indexOf(e);e=o("<img />").addClass("mapster_el").hide(),a=i._add(e[0]),e.bind("load",function(e){i.imageLoaded.call(i,e)}).bind("error",function(e){i.imageLoadError.call(i,e)}),e.attr("src",n)}else a=i._add(o(e)[0]);if(t){if(this[t])throw t+" is already used or is not available as an altImage alias.";i.ids.push(t),i[t]=i[a]}return a}},bind:function(){var e,t=this,a=t.owner.options.configTimeout/200,n=function(){var e;for(e=t.length;0<e--&&t.isLoaded(e););t.complete()?t.resolve():0<a--?t.imgTimeout=window.setTimeout(function(){n.call(t,!0)},50):t.imageLoadError.call(t)};return e=t.deferred=i.defer(),n(),e},resolve:function(){var e=this,t=e.deferred;t&&(e.deferred=null,t.resolve())},imageLoaded:function(e){var t=this,a=t.indexOf(e.target);0<=a&&(t.status[a]=!0,o.inArray(!1,t.status)<0&&t.resolve())},imageLoadError:function(e){throw clearTimeout(this.imgTimeout),this.triesLeft=0,e?"The image "+e.target.src+" failed to load.":"The images never seemed to finish loading. You may just need to increase the configTimeout if images could take a long time to load."},isLoaded:function(e){var t,a=this,n=a.status;return!!n[e]||("undefined"!=typeof(t=a[e]).complete?n[e]=t.complete:n[e]=!!i.imgWidth(t),n[e])}}}(jQuery),function(w){function n(e){w.extend(e,{complete:!1,map:null,base_canvas:null,overlay_canvas:null,commands:[],data:[],mapAreas:[],_xref:{},highlightId:-1,currentAreaId:-1,_tooltip_events:[],scaleInfo:null,index:-1,activeAreaEvent:null})}function i(e){return[e,e.render_highlight,e.render_select]}function a(e){var t=e.options,a=e.images;b.hasCanvas()&&(w.each(t.altImages||{},function(e,t){a.add(t,e)}),w.each([t].concat(t.areas),function(e,t){w.each(i(t),function(e,t){t&&t.altImage&&(t.altImageId=a.add(t.altImage))})})),e.area_options=d.updateProps({},b.area_defaults,t)}function o(t,e,a,n){function i(e){t.currentAreaId!==e&&0<=t.highlightId&&n.resolve()}return n=n||d.when.defer(),t.activeAreaEvent&&(window.clearTimeout(t.activeAreaEvent),t.activeAreaEvent=0),e<0?n.reject():a.owner.currentAction||e?t.activeAreaEvent=window.setTimeout(function(){o(t,0,a,n)},e||100):i(a.areaId),n}function t(e){b.hasCanvas()||this.blur(),e.preventDefault()}function r(e,t){var a=e.getAllDataForArea(this),n=a.length?a[0]:null;!n||n.isNotRendered()||n.owner.currentAction||e.currentAreaId!==n.areaId&&(e.highlightId!==n.areaId&&(e.clearEffects(),n.highlight(),e.options.showToolTip&&w.each(a,function(e,t){t.effectiveOptions().toolTip&&t.showToolTip()})),e.currentAreaId=n.areaId,w.isFunction(e.options.onMouseover)&&e.options.onMouseover.call(this,{e:t,options:n.effectiveOptions(),key:n.key,selected:n.isSelected()}))}function s(e,t){var a=e.getDataForArea(this),n=e.options;e.currentAreaId<0||!a||e.getDataForArea(t.relatedTarget)!==a&&(e.currentAreaId=-1,a.area=null,o(e,n.mouseoutDelay,a).then(e.clearEffects),w.isFunction(n.onMouseout)&&n.onMouseout.call(this,{e:t,options:n,key:a.key,selected:a.isSelected()}))}function c(e){var t=e.options;e.ensureNoHighlight(),t.toolTipClose&&0<=w.inArray("area-mouseout",t.toolTipClose)&&e.activeToolTip&&e.clearToolTip()}function l(n,i){function o(e){var t,a;if(l=e.isSelectable()&&(e.isDeselectable()||!e.isSelected()),c=l?!e.isSelected():e.isSelected(),s=b.getBoundList(p,e.key),w.isFunction(p.onClick)&&(u=p.onClick.call(h,{e:i,listTarget:s,key:e.key,selected:c}),d.isBool(u))){if(!u)return!1;if("#"!==(a=w(e.area).attr("href")))return window.location.href=a,!1}l&&e.toggle(),p.boundList&&0<p.boundList.length&&b.setBoundListProperties(p,s,e.isSelected()),(t=e.effectiveOptions()).includeKeys&&(r=d.split(t.includeKeys),w.each(r,function(e,t){var a=n.getDataForKey(t.toString());a.options.isMask||o(a)}))}var r,s,c,l,u,h=this,e=n.getDataForArea(this),p=n.options;t.call(this,i),p.clickNavigate&&e.href?window.location.href=e.href:e&&!e.owner.currentAction&&(p=n.options,o(e))}var b=w.mapster,d=b.utils;b.MapData=function(e,t){var a=this;a.image=e,a.images=new b.MapImages(a),a.graphics=new b.Graphics(a),a.imgCssText=e.style.cssText||null,n(a),a.configureOptions(t),a.mouseover=function(e){r.call(this,a,e)},a.mouseout=function(e){s.call(this,a,e)},a.click=function(e){l.call(this,a,e)},a.clearEffects=function(e){c.call(this,a,e)}},b.MapData.prototype={constructor:b.MapData,configureOptions:function(e){this.options=d.updateProps({},b.defaults,e)},bindImages:function(){var e=this,t=e.images;return 2<t.length?t.splice(2):0===t.length&&(t.add(e.image),t.add(e.image.src)),a(e),e.images.bind()},isActive:function(){return!this.complete||this.currentAction},state:function(){return{complete:this.complete,resizing:"resizing"===this.currentAction,zoomed:this.zoomed,zoomedArea:this.zoomedArea,scaleInfo:this.scaleInfo}},wrapId:function(){return"mapster_wrap_"+this.index},_idFromKey:function(e){return"string"==typeof e&&this._xref.hasOwnProperty(e)?this._xref[e]:-1},getSelected:function(){var a="";return w.each(this.data,function(e,t){t.isSelected()&&(a+=(a?",":"")+this.key)}),a},getAllDataForArea:function(e,t){var a,n,i,o=this,r=w(e).filter("area").attr(o.options.mapKey);if(r)for(i=[],r=d.split(r),a=0;a<(t||r.length);a++)(n=o.data[o._idFromKey(r[a])])&&(n.area=e.length?e[0]:e,i.push(n));return i},getDataForArea:function(e){var t=this.getAllDataForArea(e,1);return t&&t[0]||null},getDataForKey:function(e){return this.data[this._idFromKey(e)]},getKeysForGroup:function(e){var t=this.getDataForKey(e);return t?t.isPrimary?t.key:this.getPrimaryKeysForMapAreas(t.areas()).join(","):""},getPrimaryKeysForMapAreas:function(e){var a=[];return w.each(e,function(e,t){w.inArray(t.keys[0],a)<0&&a.push(t.keys[0])}),a},getData:function(e){return"string"==typeof e?this.getDataForKey(e):e&&e.mapster||d.isElement(e)?this.getDataForArea(e):null},ensureNoHighlight:function(){0<=this.highlightId&&(this.graphics.clearHighlight(),this.data[this.highlightId].changeState("highlight",!1),this.setHighlightId(-1))},setHighlightId:function(e){this.highlightId=e},clearSelections:function(){w.each(this.data,function(e,t){t.selected&&t.deselect(!0)}),this.removeSelectionFinish()},setAreaOptions:function(e){var t,a,n;for(t=(e=e||[]).length-1;0<=t;t--)(a=e[t])&&(n=this.getDataForKey(a.key))&&(d.updateProps(n.options,a),d.isBool(a.selected)&&(n.selected=a.selected))},drawSelections:function(e){var t,a=d.asArray(e);for(t=a.length-1;0<=t;t--)this.data[a[t]].drawSelection()},redrawSelections:function(){w.each(this.data,function(e,t){t.isSelectedOrStatic()&&t.drawSelection()})},initialize:function(){var e,t,a,n,i,o,r,s,c,l,u,h,p=this,f=p.options;if(!p.complete){for((i=(c=w(p.image)).parent().attr("id"))&&12<=i.length&&"mapster_wrap"===i.substring(0,12)?(n=c.parent()).attr("id",p.wrapId()):(n=w('<div id="'+p.wrapId()+'"></div>'),f.wrapClass&&(!0===f.wrapClass?n.addClass(c[0].className):n.addClass(f.wrapClass))),p.wrapper=n,p.scaleInfo=h=d.scaleMap(p.images[0],p.images[1],f.scaleMap),p.base_canvas=t=p.graphics.createVisibleCanvas(p),p.overlay_canvas=a=p.graphics.createVisibleCanvas(p),e=w(p.images[1]).addClass("mapster_el "+p.images[0].className).attr({id:null,usemap:null}),(s=d.size(p.images[0])).complete&&e.css({width:s.width,height:s.height}),p.buildDataset(),o={display:"block",position:"relative",padding:0,width:h.width,height:h.height},f.wrapCss&&w.extend(o,f.wrapCss),c.parent()[0]!==p.wrapper[0]&&c.before(p.wrapper),n.css(o),w(p.images.slice(2)).hide(),r=1;r<p.images.length;r++)n.append(p.images[r]);n.append(t).append(a).append(c.css(b.canvas_style)),d.setOpacity(p.images[0],0),w(p.images[1]).show(),d.setOpacity(p.images[1],1),f.isSelectable&&f.onGetList&&(u=p.data.slice(0),f.sortList&&(l="desc"===f.sortList?function(e,t){return e===t?0:t<e?-1:1}:function(e,t){return e===t?0:e<t?-1:1},u.sort(function(e,t){return e=e.value,t=t.value,l(e,t)})),p.options.boundList=f.onGetList.call(p.image,u)),p.complete=!0,p.processCommandQueue(),f.onConfigured&&"function"==typeof f.onConfigured&&f.onConfigured.call(c,!0)}},buildDataset:function(e){function t(e,t){var a=new b.AreaData(v,e,t);return a.areaId=v._xref[e]=v.data.push(a)-1,a.areaId}var a,n,i,o,r,s,c,l,u,h,p,f,d,m,g,v=this,y=v.options;for(v._xref={},v.data=[],e||(v.mapAreas=[]),(g=!y.mapKey)&&(y.mapKey="data-mapster-key"),a=b.hasVml()?"area":g?"area[coords]":"area["+y.mapKey+"]",n=w(v.map).find(a).unbind(".mapster"),p=0;p<n.length;p++)if(o=0,s=n[p],r=w(s),s.coords){for(g?(c=String(p),r.attr("data-mapster-key",c)):c=s.getAttribute(y.mapKey),e?(l=v.mapAreas[r.data("mapster")-1]).configure(c):(l=new b.MapArea(v,s,c),v.mapAreas.push(l)),i=(h=l.keys).length-1;0<=i;i--)u=h[i],y.mapValue&&(f=r.attr(y.mapValue)),g?(o=t(v.data.length,f),(d=v.data[o]).key=u=o.toString()):0<=(o=v._xref[u])?(d=v.data[o],f&&!v.data[o].value&&(d.value=f)):(o=t(u,f),(d=v.data[o]).isPrimary=0===i),l.areaDataXref.push(o),d.areasXref.push(p);(m=r.attr("href"))&&"#"!==m&&!d.href&&(d.href=m),l.nohref||r.bind("click.mapster",v.click).bind("mouseover.mapster, touchstart.mapster",v.mouseover).bind("mouseout.mapster, touchend.mapster",v.mouseout).bind("mousedown.mapster",v.mousedown),r.data("mapster",p+1)}v.setAreaOptions(y.areas),v.redrawSelections()},processCommandQueue:function(){for(var e,t=this;!t.currentAction&&t.commands.length;)e=t.commands[0],t.commands.splice(0,1),b.impl[e.command].apply(e.that,e.args)},clearEvents:function(){w(this.map).find("area").unbind(".mapster"),w(this.images).unbind(".mapster")},_clearCanvases:function(e){e||w(this.base_canvas).remove(),w(this.overlay_canvas).remove()},clearMapData:function(e){var t=this;this._clearCanvases(e),w.each(this.data,function(e,t){t.reset()}),this.data=null,e||(this.image.style.cssText=this.imgCssText,w(this.wrapper).before(this.image).remove()),t.images.clear(),this.image=null,d.ifFunction(this.clearTooltip,this)},removeSelectionFinish:function(){var e=this.graphics;e.refreshSelections(),e.clearHighlight()}}}(jQuery),function(i){function e(e){var t=this,a=t.owner;a.options.singleSelect&&a.clearSelections(),t.isSelected()||(e&&(t.optsCache=i.extend(t.effectiveRenderOptions("select"),e,{altImageId:a.images.add(e.altImage)})),t.drawSelection(),t.selected=!0,t.changeState("select",!0)),a.options.singleSelect&&a.graphics.refreshSelections()}function t(e){var t=this;t.selected=!1,t.changeState("select",!1),t.optsCache=null,t.owner.graphics.removeSelections(t.areaId),e||t.owner.removeSelectionFinish()}function a(e){var t=this;return t.isSelected()?t.deselect():t.select(e),t.isSelected()}var n=i.mapster,o=n.utils;n.AreaData=function(e,t,a){i.extend(this,{owner:e,key:t||"",isPrimary:!0,areaId:-1,href:"",value:a||"",options:{},selected:null,areasXref:[],area:null,optsCache:null})},n.AreaData.prototype={constuctor:n.AreaData,select:e,deselect:t,toggle:a,areas:function(){var e,t=[];for(e=0;e<this.areasXref.length;e++)t.push(this.owner.mapAreas[this.areasXref[e]]);return t},coords:function(a){var n=[];return i.each(this.areas(),function(e,t){n=n.concat(t.coords(a))}),n},reset:function(){i.each(this.areas(),function(e,t){t.reset()}),this.areasXref=[],this.options=null},isSelectedOrStatic:function(){var e=this.effectiveOptions();return o.isBool(e.staticState)?e.staticState:this.isSelected()},isSelected:function(){return o.isBool(this.selected)?this.selected:!!o.isBool(this.owner.area_options.selected)&&this.owner.area_options.selected},isSelectable:function(){return!o.isBool(this.effectiveOptions().staticState)&&(!o.isBool(this.owner.options.staticState)&&o.boolOrDefault(this.effectiveOptions().isSelectable,!0))},isDeselectable:function(){return!o.isBool(this.effectiveOptions().staticState)&&(!o.isBool(this.owner.options.staticState)&&o.boolOrDefault(this.effectiveOptions().isDeselectable,!0))},isNotRendered:function(){var e=i(this.area);return e.attr("nohref")||!e.attr("href")||this.effectiveOptions().isMask},effectiveOptions:function(e){var t=o.updateProps({},this.owner.area_options,this.options,e||{},{id:this.areaId});return t.selected=this.isSelected(),t},effectiveRenderOptions:function(e,t){var a,n=this.optsCache;return n&&"highlight"!==e||(a=this.effectiveOptions(t),n=o.updateProps({},a,a["render_"+e]),"highlight"!==e&&(this.optsCache=n)),i.extend({},n)},changeState:function(e,t){i.isFunction(this.owner.options.onStateChange)&&this.owner.options.onStateChange.call(this.owner.image,{key:this.key,state:e,selected:t})},highlight:function(e){var t=this.owner;this.effectiveOptions().highlight&&t.graphics.addShapeGroup(this,"highlight",e),t.setHighlightId(this.areaId),this.changeState("highlight",!0)},drawSelection:function(){
this.owner.graphics.addShapeGroup(this,"select")}},n.MapArea=function(e,t,a){if(e){var n=this;n.owner=e,n.area=t,n.areaDataXref=[],n.originalCoords=[],i.each(o.split(t.coords),function(e,t){n.originalCoords.push(parseFloat(t))}),n.length=n.originalCoords.length,n.shape=t.shape.toLowerCase(),n.nohref=t.nohref||!t.href,n.configure(a)}},n.MapArea.prototype={constructor:n.MapArea,configure:function(e){this.keys=o.split(e)},reset:function(){this.area=null},coords:function(t){return i.map(this.originalCoords,function(e){return t?e:e+t})}}}(jQuery),function(T){var M=T.mapster.utils;M.areaCorners=function(e,t,a,n,i){var o,r,s,c,l,u,h,p,f,d,m,g,v,y,w,b,k,_,C,A,I=0,S=0,x=[];for(e=e.length?e:[e],o=(a=T(a||document.body)).offset(),w=o.left,b=o.top,t&&(I=(o=T(t).offset()).left,S=o.top),y=0;y<e.length;y++)if("AREA"===(A=e[y]).nodeName){switch(k=M.split(A.coords,parseInt),A.shape){case"circle":for(m=k[0],g=k[1],_=k[2],x=[],y=0;y<360;y+=20)C=y*Math.PI/180,x.push(m+_*Math.cos(C),g+_*Math.sin(C));break;case"rect":x.push(k[0],k[1],k[2],k[1],k[2],k[3],k[0],k[3]);break;default:x=x.concat(k)}for(y=0;y<x.length;y+=2)x[y]=parseInt(x[y],10)+I,x[y+1]=parseInt(x[y+1],10)+S}else o=(A=T(A)).position(),x.push(o.left,o.top,o.left+A.width(),o.top,o.left+A.width(),o.top+A.height(),o.left,o.top+A.height());for(s=c=h=f=999999,l=u=p=d=-1,y=x.length-2;0<=y;y-=2)m=x[y],g=x[y+1],m<s&&(s=m,d=g),l<m&&(l=m,f=g),g<c&&(c=g,p=m),u<g&&(u=g,h=m);return n&&i&&(r=!1,T.each([[p-n,c-i],[h,c-i],[s-n,d-i],[s-n,f],[l,d-i],[l,f],[p-n,u],[h,u]],function(e,t){if(!r&&t[0]>w&&t[1]>b)return v=t,!(r=!0)}),r||(v=[l,u])),v}}(jQuery),function(m){var g=m.mapster,v=g.utils,e=g.MapArea.prototype;g.utils.getScaleInfo=function(e,t){var a;return t?.98<(a=e.width/t.width||e.height/t.height)&&a<1.02&&(a=1):(a=1,t=e),{scale:1!==a,scalePct:a,realWidth:t.width,realHeight:t.height,width:e.width,height:e.height,ratio:e.width/e.height}},g.utils.scaleMap=function(e,t,a){var n=v.size(e),i=v.size(t,!0);if(!i.complete())throw"Another script, such as an extension, appears to be interfering with image loading. Please let us know about this.";return n.complete()||(n=i),this.getScaleInfo(n,a?i:null)},g.MapData.prototype.resize=function(t,a,n,e){function i(e,t,a){g.hasCanvas()?(e.width=t,e.height=a):(m(e).width(t),m(e).height(a))}function o(){d.currentAction="",m.isFunction(e)&&e(),d.processCommandQueue()}function r(){if(i(d.overlay_canvas,t,a),0<=p){var e=d.data[p];e.tempOptions={fade:!1},d.getDataForKey(e.key).highlight(),e.tempOptions=null}i(d.base_canvas,t,a),d.redrawSelections(),o()}function s(){m(d.image).css(u),d.scaleInfo=v.getScaleInfo({width:t,height:a},{width:d.scaleInfo.realWidth,height:d.scaleInfo.realHeight}),m.each(d.data,function(e,t){m.each(t.areas(),function(e,t){t.resize()})})}var c,l,u,h,p,f,d=this;e=e||n,d.scaleInfo.width===t&&d.scaleInfo.height===a||(p=d.highlightId,t||(f=a/d.scaleInfo.realHeight,t=Math.round(d.scaleInfo.realWidth*f)),a||(f=t/d.scaleInfo.realWidth,a=Math.round(d.scaleInfo.realHeight*f)),u={width:String(t)+"px",height:String(a)+"px"},g.hasCanvas()||m(d.base_canvas).children().remove(),h=m(d.wrapper).find(".mapster_el").add(d.wrapper),n?(l=[],d.currentAction="resizing",h.each(function(e,t){c=v.defer(),l.push(c),m(t).animate(u,{duration:n,complete:c.resolve,easing:"linear"})}),c=v.defer(),l.push(c),v.when.all(l).then(r),s(),c.resolve()):(h.css(u),s(),r()))},g.MapArea=v.subclass(g.MapArea,function(){this.base.init(),this.owner.scaleInfo.scale&&this.resize()}),e.coords=function(e,t){var a,n=[],i=e||this.owner.scaleInfo.scalePct,o=t||0;if(1===i&&0===t)return this.originalCoords;for(a=0;a<this.length;a++)n.push(Math.round(this.originalCoords[a]*i)+o);return n},e.resize=function(){this.area.coords=this.coords().join(",")},e.reset=function(){this.area.coords=this.coords(1).join(",")},g.impl.resize=function(e,t,a,n){return!(!e&&!t)&&new g.Method(this,function(){this.resize(e,t,a,n)},null,{name:"resize",args:arguments}).go()}}(jQuery),function(h){function p(e,t,a){var n;return t?(n="string"==typeof t?h(t):h(t).clone()).append(e):n=h(e),n.css(h.extend(a||{},{display:"block",position:"absolute"})).hide(),h("body").append(n),n.attr("data-opacity",n.css("opacity")).css("opacity",0),n.show()}function s(e,t){var a={left:t.left+"px",top:t.top+"px"},n=e.attr("data-opacity")||0,i=e.css("z-index");0!==parseInt(i,10)&&"auto"!==i||(a["z-index"]=9999),e.css(a).addClass("mapster_tooltip"),t.fadeDuration&&0<t.fadeDuration?m.fader(e[0],0,n,t.fadeDuration):m.setOpacity(e[0],n)}function f(e,t,a,n,i,o){var r=a+".mapster-tooltip";if(0<=h.inArray(t,e))return n.unbind(r).bind(r,function(e){i&&!i.call(this,e)||(n.unbind(".mapster-tooltip"),o&&o.call(this))}),{object:n,event:r}}function d(e,t,a,n,i){var o,r={};return i=i||{},t?(o=m.areaCorners(t,a,n,e.outerWidth(!0),e.outerHeight(!0)),r.left=o[0],r.top=o[1]):(r.left=i.left,r.top=i.top),r.left+=i.offsetx||0,r.top+=i.offsety||0,r.css=i.css,r.fadeDuration=i.fadeDuration,s(e,r),e}function r(e){return e?"string"==typeof e||e.jquery?e:e.content:null}var t=h.mapster,m=t.utils;h.extend(t.defaults,{toolTipContainer:'<div style="border: 2px solid black; background: #EEEEEE; width:160px; padding:4px; margin: 4px; -moz-box-shadow: 3px 3px 5px #535353; -webkit-box-shadow: 3px 3px 5px #535353; box-shadow: 3px 3px 5px #535353; -moz-border-radius: 6px 6px 6px 6px; -webkit-border-radius: 6px; border-radius: 6px 6px 6px 6px; opacity: 0.9;"></div>',showToolTip:!1,toolTipFade:!0,toolTipClose:["area-mouseout","image-mouseout"],onShowToolTip:null,onHideToolTip:null}),h.extend(t.area_defaults,{toolTip:null,toolTipClose:null}),t.MapData.prototype.clearToolTip=function(){this.activeToolTip&&(this.activeToolTip.stop().remove(),this.activeToolTip=null,this.activeToolTipID=null,m.ifFunction(this.options.onHideToolTip,this))},t.AreaData.prototype.showToolTip=function(e,t){var a,n,i,o,r,s={},c=this,l=c.owner,u=c.effectiveOptions();if(t=t?h.extend({},t):{},e=e||u.toolTip,n=t.closeEvents||u.toolTipClose||l.options.toolTipClose||"tooltip-click",r="undefined"!=typeof t.template?t.template:l.options.toolTipContainer,t.closeEvents="string"==typeof n?n=m.split(n):n,t.fadeDuration=t.fadeDuration||(l.options.toolTipFade?l.options.fadeDuration||u.fadeDuration:0),i=c.area?c.area:h.map(c.areas(),function(e){return e.area}),l.activeToolTipID!==c.areaId)return l.clearToolTip(),l.activeToolTip=a=p(e,r,t.css),l.activeToolTipID=c.areaId,o=function(){l.clearToolTip()},f(n,"area-click","click",h(l.map),null,o),f(n,"tooltip-click","click",a,null,o),f(n,"image-mouseout","mouseout",h(l.image),function(e){return e.relatedTarget&&"AREA"!==e.relatedTarget.nodeName&&e.relatedTarget!==c.area},o),d(a,i,l.image,t.container,r,t),m.ifFunction(l.options.onShowToolTip,c.area,{toolTip:a,options:s,areaOptions:u,key:c.key,selected:c.isSelected()}),a},t.impl.tooltip=function(n,i){return new t.Method(this,function o(){var e,t,a=this;if(n){if(t=h(n),a.activeToolTipID===t[0])return;a.clearToolTip(),a.activeToolTip=e=p(r(i),i.template||a.options.toolTipContainer,i.css),a.activeToolTipID=t[0],f(["tooltip-click"],"tooltip-click","click",e,null,function(){a.clearToolTip()}),a.activeToolTip=e=d(e,t,a.image,i.container,i)}else a.clearToolTip()},function e(){h.isPlainObject(n)&&!i&&(i=n),this.showToolTip(r(i),i)},{name:"tooltip",args:arguments,key:n}).go()}}(jQuery);
